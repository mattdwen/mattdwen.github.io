<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Resize the system partition on El Capitan</title><meta name=viewport content="width=device-width"><link href=//fonts.googleapis.com/ rel=dns-prefetch><link href="http://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,700,700italic" rel=stylesheet type=text/css><link rel=stylesheet href=/css/main.e360.css><link rel=icon href=/favicon.png></head><body><button data-action=open-drawer id=drawer-button class=drawer-button><i class="fa fa-bars"></i></button><nav class=drawer tabindex=-1><div class=drawer-container><ul class=drawer-list role=navigation><li class=drawer-list-item><a href=/ ><i class="fa fa-home"></i>Home</a></li><li class=drawer-list-item><a href=http://www.group6.co.nz target=_blank><i class="fa fa-arrow-circle-o-right"></i>Group 6 Technologies</a></li><li class=drawer-list-item><a href=http://www.winerack.io target=_blank><i class="fa fa-arrow-circle-o-right"></i>winerack.io</a></li><li class=drawer-list-divider></li><li class="drawer-list-item drawer-list-title">Follow me</li><li class=drawer-list-item><a href=http://twitter.com/mattdwen target=_blank><i class="fa fa-twitter"></i>Twitter</a></li><li class=drawer-list-item><a href=http://www.flickr.com/mattdwen target=_blank><i class="fa fa-flickr"></i>Flickr</a></li><li class=drawer-list-item><a href=https://github.com/mattdwen target=_blank><i class="fa fa-github"></i>GitHub</a></li><li class=drawer-list-item><a href=http://instagram.com/mattdwen target=_blank><i class="fa fa-instagram"></i>Instagram</a></li><li class=drawer-list-item><a href=http://mattdwen.tumblr.com/ target=_blank><i class="fa fa-tumblr"></i>Tumblr</a></li></ul></div></nav><div class=drawer-overlay></div><main class=container id=container role=main><div class=surface><div class=surface-container><div class=content><aside class=cover role=banner><div class=cover-image data-load-image=/img/banner.c75b.jpg></div><div class=cover-container><a class=cover-logo href=/ ><img src=/img/avatar.0b80.jpg alt="Matt Dwen"></a><h1 class=cover-title>dwen.co.nz</h1><p class=cover-description>Sorter of Shit</p></div></aside><section class=wrapper tabindex=0><div class=wrapper-container><h2>Resize the system partition on El Capitan</h2><p class=meta>22 Mar 2016</p><div class=post><p>This may be specific to running OS X within a virtual machine, but I ran into some issues resizing the partition where OS X is installed.</p><p>I run a number of virtual machines for testing, and for whatever reason, I originally created my OS X 10.11 El Capitan VM with only a 40GB disk. The 10.11.4 update dropped today, which I went to install, and after downloading was told there wasn’t enough disk space to install the update.</p><p>“Easy!” I thought. “I’ve done this before.”</p><p>Resizing a virtual disk with VMWare is easy, but you still need to resize the partition within the virtual machine once it has been expanded.</p><p>The new Disk Utility in El Capitan is a bit special. While everything is technically still in there, it feels much harder to operate.</p><p><img src=/img/2016/el-cap-resize/disk-util.0b64.png alt="The El Capitan Disk Utility"> <em>The disk is showing the new 60GB capacity.</em></p><p>What was really weird was that any option to resize the volume appeared to be disabled.</p><p><img src=/img/2016/el-cap-resize/cant-resize.32ee.png alt="No option to resize"> <em>But the volume is still 40GB, with no apparent free space.</em></p><p>Instead, I had to turn to the <code class=highlighter-rouge>diskutil</code> command.</p><p>From Terminal, <code class=highlighter-rouge>diskutil list</code> shows me a list of all the disks and volumes in the system.</p><p><img src=/img/2016/el-cap-resize/disk-list.6459.png alt="diskutil list output"></p><p>The disk (GUID_partition_scheme) is showing the 60GB total size, and the Macintosh HD volume is still 40GB.</p><p>There’s a <code class=highlighter-rouge>resizeVolume</code> command which makes resizing really easy. All you need to know is the name of the volume, and how much space you want to add (or remove).</p><p>It’s even easier if you want to expand the volume to as big as it can go: you can use <code class=highlighter-rouge>R</code> as the size parameter, which uses all it can.</p><p>In the end my command was:</p><div class=highlighter-rouge><pre class=highlight><code>diskutil resizeVolume "Macintosh HD" R
</code></pre></div><p>You can also use the <strong>IDENTIFIER</strong> instead of the volume name. In this case it would have been <code class=highlighter-rouge>disk0s2</code>, which you can see in the <code class=highlighter-rouge>diskutil list</code> output.</p><p>You get a nice little progress bar while it’s expanding. <img src=/img/2016/el-cap-resize/resizing.0fda.png alt=Progress></p><p>And afterwards, your new space is available without having to reboot. <img src=/img/2016/el-cap-resize/after-resize.fa90.png alt="The new volume size"></p><p>What’s weird is now after the resize, back in the Disk Utility application, all the correct options to resize the volume are back again! <img src=/img/2016/el-cap-resize/disk-util-after.png alt="Disk Utility is happy again"> <em>I can drag the partition marker now, and choose to add a new partition.</em></p></div><footer class=footer role=contentinfo><p><small>&copy; 2016 Matt Dwen. All Rights Reserved.</small></p></footer></div></section></div></div></div></main><script src=/js/scripts.4f8c.js></script></body></html>