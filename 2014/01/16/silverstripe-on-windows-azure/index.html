<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>SilverStripe on Windows Azure</title><meta name=viewport content="width=device-width"><link href="//fonts.googleapis.com/" rel=dns-prefetch><link href="http://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,700,700italic" rel=stylesheet type=text/css><link rel=stylesheet href=/css/main.f5f4.css><link rel=icon href=/favicon.png></head><body><button data-action=open-drawer id=drawer-button class=drawer-button><i class="fa fa-bars"></i></button><nav class=drawer tabindex=-1><div class=drawer-container><ul class=drawer-list role=navigation><li class=drawer-list-item><a href="/"><i class="fa fa-home"></i> Home</a></li><li class=drawer-list-item><a href=http://www.group6.co.nz><i class="fa fa-arrow-circle-o-right"></i> Group 6 Technologies</a></li><li class=drawer-list-item><a href=http://www.winerack.io><i class="fa fa-arrow-circle-o-right"></i> winerack.io</a></li><li class=drawer-list-divider></li><li class="drawer-list-item drawer-list-title">Follow me</li><li class=drawer-list-item><a href=http://twitter.com/mattdwen target=_blank><i class="fa fa-twitter"></i> Twitter</a></li><li class=drawer-list-item><a href=http://www.flickr.com/mattdwen target=_blank><i class="fa fa-flickr"></i> Flickr</a></li><li class=drawer-list-item><a href=https://github.com/mattdwen target=_blank><i class="fa fa-github"></i> GitHub</a></li><li class=drawer-list-item><a href=http://instagram.com/mattdwen target=_blank><i class="fa fa-instagram"></i> Instagram</a></li><li class=drawer-list-item><a href="http://mattdwen.tumblr.com/" target=_blank><i class="fa fa-tumblr"></i> Tumblr</a></li></ul></div></nav><div class=drawer-overlay></div><main class=container id=container role=main><div class=surface><div class=surface-container><div class=content><aside class=cover role=banner><div class=cover-image data-load-image=/img/banner.9010.jpg></div><div class=cover-container><a class=cover-logo href=http://www.dwen.co.nz><img src=/img/avatar.8e18.jpg alt="Matt Dwen"></a><h1 class=cover-title>dwen.co.nz</h1><p class=cover-description>Sorter of Shit</p></div></aside><section class=wrapper tabindex=0><div class=wrapper-container><h2>SilverStripe on Windows Azure</h2><p class=meta>16 Jan 2014</p><div class=post><p>While SilverStripe should largely work out of the box under IIS, I ran into a few issues getting it running on Azure.</p><p>I created a new free Azure custom web site so I could create an associated MySQL database at the same time. I then downloaded everything locally using the recommended <a href=http://doc.silverstripe.org/framework/en/trunk/installation/composer>SilverStripe Installer</a> via composer, then ftp’d straight into the new Azure account.</p><p>The installer gave me some warnings about <strong>fileinfo</strong> not being enabled, and <strong>URL rewriting</strong> being undetectable. After a bit of digging and getting no-where I ran the installer anyway, which completed most steps, but failed at <strong>Friendly URLs are not working</strong>.</p><p>Trying to load the site at this stage gave me the page content, but all the stylesheets and images were missing. Viewing the output source showed that all links were prefixed with <strong>index.php</strong>.</p><p>I downloaded the following files, knowing that the installer modifies them:</p><ul><li>.htaccess</li><li>index.php</li><li>web.config</li><li>mysite/_.htaccess</li><li>mysite/_config.php</li><li>mysite/_config/config.yml</li></ul><p>Inside <strong>index.php</strong> I changed the <strong>BASE_SCRIPT_URL</strong> definition from <code>'index.php/'</code> to <code>''</code>:</p><p><code>define('BASE_SCRIPT_URL','');</code></p><p>This allowed the front page to work, but all other URLs resulted with a 404.</p><p>The redirection certainly wasn’t working. Since I knew what I wanted from an .htaccess file, and wasn’t familiar with the IIS URL rewriting rules, I found <a href="http://blog.mdavies.net/2013/05/25/azure-websites-htaccess-rewrite-web-config/">this great post</a> about the IIS add-on URL Rewriter which will convert .htaccess rules to an IIS config for you. This is the web.config which I ended up with:</p><script src=https://gist.github.com/mattdwen/09b01b16621b6c5a99c9.js></script><p>Now all the pages were working. I ran a /dev/build to ensure everything was correct after the semi-completed install and I was away.</p></div><footer class=footer role=contentinfo><p><small>&copy 2014 Matt Dwen. All Rights Reserved.</small></p></footer></div></section></div></div></div></main><script src=/js/scripts.b2ce.js></script></body></html>