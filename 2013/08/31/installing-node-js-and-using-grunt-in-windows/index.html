<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Installing Node.js and using Grunt in Windows</title><meta name=viewport content="width=device-width"><link href="//fonts.googleapis.com/" rel=dns-prefetch><link href="http://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,700,700italic" rel=stylesheet type=text/css><link rel=stylesheet href=/css/main.c035.css><link rel=icon href=/favicon.png></head><body><button data-action=open-drawer id=drawer-button class=drawer-button><i class="fa fa-bars"></i></button><nav class=drawer tabindex=-1><div class=drawer-container><ul class=drawer-list role=navigation><li class=drawer-list-item><a href="/"><i class="fa fa-home"></i> Home</a></li><li class=drawer-list-item><a href="/"><i class="fa fa-arrow-circle-o-right"></i> Group 6 Technologies</a></li><li class=drawer-list-item><a href="/"><i class="fa fa-arrow-circle-o-right"></i> Winerack.io</a></li><li class=drawer-list-divider></li><li class="drawer-list-item drawer-list-title">Follow me</li><li class=drawer-list-item><a href=http://twitter.com/mattdwen target=_blank><i class="fa fa-twitter"></i> Twitter</a></li><li class=drawer-list-item><a href=http://www.flickr.com/mattdwen target=_blank><i class="fa fa-flickr"></i> Flickr</a></li><li class=drawer-list-item><a href=https://github.com/mattdwen target=_blank><i class="fa fa-github"></i> GitHub</a></li><li class=drawer-list-item><a href=http://instagram.com/mattdwen target=_blank><i class="fa fa-instagram"></i> Instagram</a></li><li class=drawer-list-item><a href="http://mattdwen.tumblr.com/" target=_blank><i class="fa fa-tumblr"></i> Tumblr</a></li></ul></div></nav><div class=drawer-overlay></div><main class=container id=container role=main><div class=surface><div class=surface-container><div class=content><aside class=cover role=banner><div class=cover-image data-load-image=/img/banner.fa43.jpg></div><div class=cover-container><a class=cover-logo href=http://www.dwen.co.nz><img src=/img/avatar.6842.jpg alt="Matt Dwen"></a><h1 class=cover-title>dwen.co.nz</h1><p class=cover-description>Sorter of Shit</p></div></aside><section class=wrapper tabindex=0><div class=wrapper-container><h2>Installing Node.js and using Grunt in Windows</h2><p class=meta>31 Aug 2013</p><div class=post><p><img src=/img/2013/aug/nodejs.1a5e.png alt=""></p><p>I’ve recently started using Grunt to auto build change logs for the PHP framework I’ve developed at Xplore, and I’m interested in doing the same for DIVA. Doing this in OS X is one thing, Windows I’m expecting to be completely another. I figured I’d document this for my own reference when I need to do it again.</p><p>Trying all this in Server 2012 trail running in a VM if it makes any difference.</p><h2 id=installing-nodejs-and-npm>Installing Node.js and NPM</h2><p>First thing is download the Node.js installer from <a href="http://nodejs.org/">http://nodejs.org/</a>. I left all the defaults on such as including NPM and adding to the PATH variables.</p><p>Running <strong>npm</strong> from PowerShell worked right away! (always a pleasant surprise when dealing with *nixy things in Windows land)</p><p><img src=/img/2013/aug/node01.fc9a.png alt=""></p><p>The whole point of having Node.js available is the fantastic library of modules available, which you can install via the <strong>Node Package Manager</strong>, or <strong>npm</strong> command line. These packages need to be installed per project. Rather than having to manually install them every time, you can define a list of requirements in a <strong>package.json</strong> file in the root of your directory. You could build this by hand, or instead run <strong>npm init</strong> in your project root.</p><p><img src=/img/2013/aug/node03.db7a.png alt=""></p><p>This will prompt you to set up some default parameters, such as project name, current version, author, git location, and so on. You should now be left with a <strong>package.json</strong> in your project root which looks similar to:</p><p><code>{ "name": "DIVA", "version": "2.4.2", "description": "DIVA Distributed Media System", "repository": { "type": "git", "url": "https://github.com/mattdwen/DIVA" }, "author": "Matt Dwen", "license": "Group 6 Technologies DIVA License", "bugs": { "url": "https://github.com/mattdwen/DIVA/issues" } }</code></p><p>Since I’m not building an actual Node.js application, and just utilising <strong>npm</strong>, I’ve striped out most of the properties. The full specs can be found at <a href=https://npmjs.org/doc/json.html>https://npmjs.org/doc/json.html</a>.</p><h2 id=installing-grunt>Installing Grunt</h2><p>Now we can start defining our project dependancies. For now, all I want is Grunt:</p><p><code>{ "name": "DIVA", "version": "2.4.2", "devDependencies": { "grunt": "~0.4.1" } }</code></p><p>Here I’ve basically defined that development is dependant on a package called <strong>grunt</strong> of which I require approximately version 0.4.1. This means when I update my dependancies, I’ll get any version &lt; 0.5.0. This syntax uses <strong>semver</strong>, which is defined over at <a href=https://npmjs.org/doc/misc/semver.html>https://npmjs.org/doc/misc/semver.html</a>, and is really powerful at defining what versions you allow.</p><p>I should now be able to install grunt to my project, by executing <strong>npm install</strong>:</p><p><img src=/img/2013/aug/node04.4f2a.png alt=""></p><p>It’ll automatically find all the dependancies for grunt and retrieve them as well. You should now have a <strong>node_packages</strong> directory in your project directory which contains Grunt.</p><h2 id=configuring-grunt>Configuring Grunt</h2><p>Grunt is a bit more complex to configure. It has it’s own packages, which come from npm again, and basically runs as it’s own little application, of which each step can use the dependancies. I’m looking to automate the building of my CHANGELOG.md, which <a href=https://github.com/btford/grunt-conventional-changelog>grunt-conventional-changelog</a>, which uses commit messages based on the <a href="http://angularjs.org/">AngularJS</a> <a href=https://docs.google.com/a/group6.co.nz/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit>commit rules</a> to generate the log.</p><p>First, I need to add this dependancy to my package.json:</p><p><code>{ "name": "DIVA", "version": "2.4.2", "devDependencies": { "grunt": "~0.4.1", "grunt-conventional-changelog": "~1.0.0" } }</code></p><p>Now I need to define <strong>Gruntfile.js</strong> in my project root:</p><p><code>module.exports = function (grunt) { // Grunt plugins grunt.loadNpmTasks('grunt-conventional-changelog'); // Config grunt.initConfig({ changelog: { options: { github: 'mattdwen/diva' } } }); // Alias tasks grunt.registerTask('package', ['changelog']); grunt.registerTask('default', ['package']); };</code></p><p>First it’s loading the changelog package from npm. Next it’s defining the initialisation config for each of the plugins, in this case just the changelog I’ve already loaded. Last I’m setting up a handfull of shortcuts, which run a series of tasks, in the order defined. Grunt looks for a <strong>default</strong> task by default.</p><p>Now all I need to do is run <strong>grunt</strong> in the project root. It runs fine, but does’t actually do anything yet as I haven’t made any git commits yet! Once I’ve added one in…</p><p><img src=/img/2013/aug/node05.ab8c.png alt=""></p><p>And I end up with the following in CHANGELOG.md:</p><p>``` ### v2.4.2 (2013-08-31)</p><h4 id=features>Features</h4><ul><li><strong>npm:</strong> Added package.json (<a href=http://github.com/mattdwen/diva/commit/b9d187a323b55beb305b19d21436bd72b0824deb>b9d187a3</a>) ```</li></ul><p>Which is all fairly fancy-pants if you ask me! Certainly beats building it by hand.</p><h2 id=version-control>Version Control</h2><p>You end up with a lot of additional files once the packages are installed, just like Nuget. The only files you need to commit are <strong>packages.json</strong> and <strong>Gruntfile.js</strong>, and of course anything you generate which you need to keep. The <strong>node_packages</strong> directory can be added to your <strong>.gitignore</strong>.</p></div><footer class=footer role=contentinfo><p><small>&copy 2014 Matt Dwen. All Rights Reserved.</small></p></footer></div></section></div></div></div></main><script src=/js/scripts.57f1.js></script></body></html>